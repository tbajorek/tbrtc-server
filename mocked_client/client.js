!function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=48)}([function(e,t,n){(function(e){var n;!function(){var r="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this||{},s=r._,i=Array.prototype,o=Object.prototype,a="undefined"!=typeof Symbol?Symbol.prototype:null,c=i.push,u=i.slice,l=o.toString,d=o.hasOwnProperty,f=Array.isArray,h=Object.keys,p=Object.create,m=function(){},_=function(e){return e instanceof _?e:this instanceof _?void(this._wrapped=e):new _(e)};t.nodeType?r._=_:(!e.nodeType&&e.exports&&(t=e.exports=_),t._=_),_.VERSION="1.9.1";var v,g=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,s){return e.call(t,n,r,s)};case 4:return function(n,r,s,i){return e.call(t,n,r,s,i)}}return function(){return e.apply(t,arguments)}},y=function(e,t,n){return _.iteratee!==v?_.iteratee(e,t):null==e?_.identity:_.isFunction(e)?g(e,t,n):_.isObject(e)&&!_.isArray(e)?_.matcher(e):_.property(e)};_.iteratee=v=function(e,t){return y(e,t,1/0)};var w=function(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),r=Array(n),s=0;s<n;s++)r[s]=arguments[s+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r);case 2:return e.call(this,arguments[0],arguments[1],r)}var i=Array(t+1);for(s=0;s<t;s++)i[s]=arguments[s];return i[t]=r,e.apply(this,i)}},b=function(e){if(!_.isObject(e))return{};if(p)return p(e);m.prototype=e;var t=new m;return m.prototype=null,t},S=function(e){return function(t){return null==t?void 0:t[e]}},x=function(e,t){return null!=e&&d.call(e,t)},k=function(e,t){for(var n=t.length,r=0;r<n;r++){if(null==e)return;e=e[t[r]]}return n?e:void 0},O=Math.pow(2,53)-1,E=S("length"),N=function(e){var t=E(e);return"number"==typeof t&&t>=0&&t<=O};_.each=_.forEach=function(e,t,n){var r,s;if(t=g(t,n),N(e))for(r=0,s=e.length;r<s;r++)t(e[r],r,e);else{var i=_.keys(e);for(r=0,s=i.length;r<s;r++)t(e[i[r]],i[r],e)}return e},_.map=_.collect=function(e,t,n){t=y(t,n);for(var r=!N(e)&&_.keys(e),s=(r||e).length,i=Array(s),o=0;o<s;o++){var a=r?r[o]:o;i[o]=t(e[a],a,e)}return i};var I=function(e){return function(t,n,r,s){var i=arguments.length>=3;return function(t,n,r,s){var i=!N(t)&&_.keys(t),o=(i||t).length,a=e>0?0:o-1;for(s||(r=t[i?i[a]:a],a+=e);a>=0&&a<o;a+=e){var c=i?i[a]:a;r=n(r,t[c],c,t)}return r}(t,g(n,s,4),r,i)}};_.reduce=_.foldl=_.inject=I(1),_.reduceRight=_.foldr=I(-1),_.find=_.detect=function(e,t,n){var r=(N(e)?_.findIndex:_.findKey)(e,t,n);if(void 0!==r&&-1!==r)return e[r]},_.filter=_.select=function(e,t,n){var r=[];return t=y(t,n),_.each(e,function(e,n,s){t(e,n,s)&&r.push(e)}),r},_.reject=function(e,t,n){return _.filter(e,_.negate(y(t)),n)},_.every=_.all=function(e,t,n){t=y(t,n);for(var r=!N(e)&&_.keys(e),s=(r||e).length,i=0;i<s;i++){var o=r?r[i]:i;if(!t(e[o],o,e))return!1}return!0},_.some=_.any=function(e,t,n){t=y(t,n);for(var r=!N(e)&&_.keys(e),s=(r||e).length,i=0;i<s;i++){var o=r?r[i]:i;if(t(e[o],o,e))return!0}return!1},_.contains=_.includes=_.include=function(e,t,n,r){return N(e)||(e=_.values(e)),("number"!=typeof n||r)&&(n=0),_.indexOf(e,t,n)>=0},_.invoke=w(function(e,t,n){var r,s;return _.isFunction(t)?s=t:_.isArray(t)&&(r=t.slice(0,-1),t=t[t.length-1]),_.map(e,function(e){var i=s;if(!i){if(r&&r.length&&(e=k(e,r)),null==e)return;i=e[t]}return null==i?i:i.apply(e,n)})}),_.pluck=function(e,t){return _.map(e,_.property(t))},_.where=function(e,t){return _.filter(e,_.matcher(t))},_.findWhere=function(e,t){return _.find(e,_.matcher(t))},_.max=function(e,t,n){var r,s,i=-1/0,o=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var a=0,c=(e=N(e)?e:_.values(e)).length;a<c;a++)null!=(r=e[a])&&r>i&&(i=r);else t=y(t,n),_.each(e,function(e,n,r){((s=t(e,n,r))>o||s===-1/0&&i===-1/0)&&(i=e,o=s)});return i},_.min=function(e,t,n){var r,s,i=1/0,o=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var a=0,c=(e=N(e)?e:_.values(e)).length;a<c;a++)null!=(r=e[a])&&r<i&&(i=r);else t=y(t,n),_.each(e,function(e,n,r){((s=t(e,n,r))<o||s===1/0&&i===1/0)&&(i=e,o=s)});return i},_.shuffle=function(e){return _.sample(e,1/0)},_.sample=function(e,t,n){if(null==t||n)return N(e)||(e=_.values(e)),e[_.random(e.length-1)];var r=N(e)?_.clone(e):_.values(e),s=E(r);t=Math.max(Math.min(t,s),0);for(var i=s-1,o=0;o<t;o++){var a=_.random(o,i),c=r[o];r[o]=r[a],r[a]=c}return r.slice(0,t)},_.sortBy=function(e,t,n){var r=0;return t=y(t,n),_.pluck(_.map(e,function(e,n,s){return{value:e,index:r++,criteria:t(e,n,s)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index}),"value")};var j=function(e,t){return function(n,r,s){var i=t?[[],[]]:{};return r=y(r,s),_.each(n,function(t,s){var o=r(t,s,n);e(i,t,o)}),i}};_.groupBy=j(function(e,t,n){x(e,n)?e[n].push(t):e[n]=[t]}),_.indexBy=j(function(e,t,n){e[n]=t}),_.countBy=j(function(e,t,n){x(e,n)?e[n]++:e[n]=1});var P=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;_.toArray=function(e){return e?_.isArray(e)?u.call(e):_.isString(e)?e.match(P):N(e)?_.map(e,_.identity):_.values(e):[]},_.size=function(e){return null==e?0:N(e)?e.length:_.keys(e).length},_.partition=j(function(e,t,n){e[n?0:1].push(t)},!0),_.first=_.head=_.take=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[0]:_.initial(e,e.length-t)},_.initial=function(e,t,n){return u.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},_.last=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[e.length-1]:_.rest(e,Math.max(0,e.length-t))},_.rest=_.tail=_.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},_.compact=function(e){return _.filter(e,Boolean)};var T=function(e,t,n,r){for(var s=(r=r||[]).length,i=0,o=E(e);i<o;i++){var a=e[i];if(N(a)&&(_.isArray(a)||_.isArguments(a)))if(t)for(var c=0,u=a.length;c<u;)r[s++]=a[c++];else T(a,t,n,r),s=r.length;else n||(r[s++]=a)}return r};_.flatten=function(e,t){return T(e,t,!1)},_.without=w(function(e,t){return _.difference(e,t)}),_.uniq=_.unique=function(e,t,n,r){_.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=y(n,r));for(var s=[],i=[],o=0,a=E(e);o<a;o++){var c=e[o],u=n?n(c,o,e):c;t&&!n?(o&&i===u||s.push(c),i=u):n?_.contains(i,u)||(i.push(u),s.push(c)):_.contains(s,c)||s.push(c)}return s},_.union=w(function(e){return _.uniq(T(e,!0,!0))}),_.intersection=function(e){for(var t=[],n=arguments.length,r=0,s=E(e);r<s;r++){var i=e[r];if(!_.contains(t,i)){var o;for(o=1;o<n&&_.contains(arguments[o],i);o++);o===n&&t.push(i)}}return t},_.difference=w(function(e,t){return t=T(t,!0,!0),_.filter(e,function(e){return!_.contains(t,e)})}),_.unzip=function(e){for(var t=e&&_.max(e,E).length||0,n=Array(t),r=0;r<t;r++)n[r]=_.pluck(e,r);return n},_.zip=w(_.unzip),_.object=function(e,t){for(var n={},r=0,s=E(e);r<s;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n};var B=function(e){return function(t,n,r){n=y(n,r);for(var s=E(t),i=e>0?0:s-1;i>=0&&i<s;i+=e)if(n(t[i],i,t))return i;return-1}};_.findIndex=B(1),_.findLastIndex=B(-1),_.sortedIndex=function(e,t,n,r){for(var s=(n=y(n,r,1))(t),i=0,o=E(e);i<o;){var a=Math.floor((i+o)/2);n(e[a])<s?i=a+1:o=a}return i};var A=function(e,t,n){return function(r,s,i){var o=0,a=E(r);if("number"==typeof i)e>0?o=i>=0?i:Math.max(i+a,o):a=i>=0?Math.min(i+1,a):i+a+1;else if(n&&i&&a)return r[i=n(r,s)]===s?i:-1;if(s!=s)return(i=t(u.call(r,o,a),_.isNaN))>=0?i+o:-1;for(i=e>0?o:a-1;i>=0&&i<a;i+=e)if(r[i]===s)return i;return-1}};_.indexOf=A(1,_.findIndex,_.sortedIndex),_.lastIndexOf=A(-1,_.findLastIndex),_.range=function(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var r=Math.max(Math.ceil((t-e)/n),0),s=Array(r),i=0;i<r;i++,e+=n)s[i]=e;return s},_.chunk=function(e,t){if(null==t||t<1)return[];for(var n=[],r=0,s=e.length;r<s;)n.push(u.call(e,r,r+=t));return n};var C=function(e,t,n,r,s){if(!(r instanceof t))return e.apply(n,s);var i=b(e.prototype),o=e.apply(i,s);return _.isObject(o)?o:i};_.bind=w(function(e,t,n){if(!_.isFunction(e))throw new TypeError("Bind must be called on a function");var r=w(function(s){return C(e,r,t,this,n.concat(s))});return r}),_.partial=w(function(e,t){var n=_.partial.placeholder,r=function(){for(var s=0,i=t.length,o=Array(i),a=0;a<i;a++)o[a]=t[a]===n?arguments[s++]:t[a];for(;s<arguments.length;)o.push(arguments[s++]);return C(e,r,this,this,o)};return r}),_.partial.placeholder=_,_.bindAll=w(function(e,t){var n=(t=T(t,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=t[n];e[r]=_.bind(e[r],e)}}),_.memoize=function(e,t){var n=function(r){var s=n.cache,i=""+(t?t.apply(this,arguments):r);return x(s,i)||(s[i]=e.apply(this,arguments)),s[i]};return n.cache={},n},_.delay=w(function(e,t,n){return setTimeout(function(){return e.apply(null,n)},t)}),_.defer=_.partial(_.delay,_,1),_.throttle=function(e,t,n){var r,s,i,o,a=0;n||(n={});var c=function(){a=!1===n.leading?0:_.now(),r=null,o=e.apply(s,i),r||(s=i=null)},u=function(){var u=_.now();a||!1!==n.leading||(a=u);var l=t-(u-a);return s=this,i=arguments,l<=0||l>t?(r&&(clearTimeout(r),r=null),a=u,o=e.apply(s,i),r||(s=i=null)):r||!1===n.trailing||(r=setTimeout(c,l)),o};return u.cancel=function(){clearTimeout(r),a=0,r=s=i=null},u},_.debounce=function(e,t,n){var r,s,i=function(t,n){r=null,n&&(s=e.apply(t,n))},o=w(function(o){if(r&&clearTimeout(r),n){var a=!r;r=setTimeout(i,t),a&&(s=e.apply(this,o))}else r=_.delay(i,t,this,o);return s});return o.cancel=function(){clearTimeout(r),r=null},o},_.wrap=function(e,t){return _.partial(t,e)},_.negate=function(e){return function(){return!e.apply(this,arguments)}},_.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},_.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},_.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},_.once=_.partial(_.before,2),_.restArguments=w;var M=!{toString:null}.propertyIsEnumerable("toString"),L=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],U=function(e,t){var n=L.length,r=e.constructor,s=_.isFunction(r)&&r.prototype||o,i="constructor";for(x(e,i)&&!_.contains(t,i)&&t.push(i);n--;)(i=L[n])in e&&e[i]!==s[i]&&!_.contains(t,i)&&t.push(i)};_.keys=function(e){if(!_.isObject(e))return[];if(h)return h(e);var t=[];for(var n in e)x(e,n)&&t.push(n);return M&&U(e,t),t},_.allKeys=function(e){if(!_.isObject(e))return[];var t=[];for(var n in e)t.push(n);return M&&U(e,t),t},_.values=function(e){for(var t=_.keys(e),n=t.length,r=Array(n),s=0;s<n;s++)r[s]=e[t[s]];return r},_.mapObject=function(e,t,n){t=y(t,n);for(var r=_.keys(e),s=r.length,i={},o=0;o<s;o++){var a=r[o];i[a]=t(e[a],a,e)}return i},_.pairs=function(e){for(var t=_.keys(e),n=t.length,r=Array(n),s=0;s<n;s++)r[s]=[t[s],e[t[s]]];return r},_.invert=function(e){for(var t={},n=_.keys(e),r=0,s=n.length;r<s;r++)t[e[n[r]]]=n[r];return t},_.functions=_.methods=function(e){var t=[];for(var n in e)_.isFunction(e[n])&&t.push(n);return t.sort()};var R=function(e,t){return function(n){var r=arguments.length;if(t&&(n=Object(n)),r<2||null==n)return n;for(var s=1;s<r;s++)for(var i=arguments[s],o=e(i),a=o.length,c=0;c<a;c++){var u=o[c];t&&void 0!==n[u]||(n[u]=i[u])}return n}};_.extend=R(_.allKeys),_.extendOwn=_.assign=R(_.keys),_.findKey=function(e,t,n){t=y(t,n);for(var r,s=_.keys(e),i=0,o=s.length;i<o;i++)if(t(e[r=s[i]],r,e))return r};var z,F,D=function(e,t,n){return t in n};_.pick=w(function(e,t){var n={},r=t[0];if(null==e)return n;_.isFunction(r)?(t.length>1&&(r=g(r,t[1])),t=_.allKeys(e)):(r=D,t=T(t,!1,!1),e=Object(e));for(var s=0,i=t.length;s<i;s++){var o=t[s],a=e[o];r(a,o,e)&&(n[o]=a)}return n}),_.omit=w(function(e,t){var n,r=t[0];return _.isFunction(r)?(r=_.negate(r),t.length>1&&(n=t[1])):(t=_.map(T(t,!1,!1),String),r=function(e,n){return!_.contains(t,n)}),_.pick(e,r,n)}),_.defaults=R(_.allKeys,!0),_.create=function(e,t){var n=b(e);return t&&_.extendOwn(n,t),n},_.clone=function(e){return _.isObject(e)?_.isArray(e)?e.slice():_.extend({},e):e},_.tap=function(e,t){return t(e),e},_.isMatch=function(e,t){var n=_.keys(t),r=n.length;if(null==e)return!r;for(var s=Object(e),i=0;i<r;i++){var o=n[i];if(t[o]!==s[o]||!(o in s))return!1}return!0},z=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var s=typeof e;return("function"===s||"object"===s||"object"==typeof t)&&F(e,t,n,r)},F=function(e,t,n,r){e instanceof _&&(e=e._wrapped),t instanceof _&&(t=t._wrapped);var s=l.call(e);if(s!==l.call(t))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return a.valueOf.call(e)===a.valueOf.call(t)}var i="[object Array]"===s;if(!i){if("object"!=typeof e||"object"!=typeof t)return!1;var o=e.constructor,c=t.constructor;if(o!==c&&!(_.isFunction(o)&&o instanceof o&&_.isFunction(c)&&c instanceof c)&&"constructor"in e&&"constructor"in t)return!1}r=r||[];for(var u=(n=n||[]).length;u--;)if(n[u]===e)return r[u]===t;if(n.push(e),r.push(t),i){if((u=e.length)!==t.length)return!1;for(;u--;)if(!z(e[u],t[u],n,r))return!1}else{var d,f=_.keys(e);if(u=f.length,_.keys(t).length!==u)return!1;for(;u--;)if(d=f[u],!x(t,d)||!z(e[d],t[d],n,r))return!1}return n.pop(),r.pop(),!0},_.isEqual=function(e,t){return z(e,t)},_.isEmpty=function(e){return null==e||(N(e)&&(_.isArray(e)||_.isString(e)||_.isArguments(e))?0===e.length:0===_.keys(e).length)},_.isElement=function(e){return!(!e||1!==e.nodeType)},_.isArray=f||function(e){return"[object Array]"===l.call(e)},_.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},_.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(e){_["is"+e]=function(t){return l.call(t)==="[object "+e+"]"}}),_.isArguments(arguments)||(_.isArguments=function(e){return x(e,"callee")});var J=r.document&&r.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof J&&(_.isFunction=function(e){return"function"==typeof e||!1}),_.isFinite=function(e){return!_.isSymbol(e)&&isFinite(e)&&!isNaN(parseFloat(e))},_.isNaN=function(e){return _.isNumber(e)&&isNaN(e)},_.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===l.call(e)},_.isNull=function(e){return null===e},_.isUndefined=function(e){return void 0===e},_.has=function(e,t){if(!_.isArray(t))return x(e,t);for(var n=t.length,r=0;r<n;r++){var s=t[r];if(null==e||!d.call(e,s))return!1;e=e[s]}return!!n},_.noConflict=function(){return r._=s,this},_.identity=function(e){return e},_.constant=function(e){return function(){return e}},_.noop=function(){},_.property=function(e){return _.isArray(e)?function(t){return k(t,e)}:S(e)},_.propertyOf=function(e){return null==e?function(){}:function(t){return _.isArray(t)?k(e,t):e[t]}},_.matcher=_.matches=function(e){return e=_.extendOwn({},e),function(t){return _.isMatch(t,e)}},_.times=function(e,t,n){var r=Array(Math.max(0,e));t=g(t,n,1);for(var s=0;s<e;s++)r[s]=t(s);return r},_.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},_.now=Date.now||function(){return(new Date).getTime()};var q={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},$=_.invert(q),W=function(e){var t=function(t){return e[t]},n="(?:"+_.keys(e).join("|")+")",r=RegExp(n),s=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(s,t):e}};_.escape=W(q),_.unescape=W($),_.result=function(e,t,n){_.isArray(t)||(t=[t]);var r=t.length;if(!r)return _.isFunction(n)?n.call(e):n;for(var s=0;s<r;s++){var i=null==e?void 0:e[t[s]];void 0===i&&(i=n,s=r),e=_.isFunction(i)?i.call(e):i}return e};var V=0;_.uniqueId=function(e){var t=++V+"";return e?e+t:t},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var G=/(.)^/,Y={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Z=/\\|'|\r|\n|\u2028|\u2029/g,H=function(e){return"\\"+Y[e]};_.template=function(e,t,n){!t&&n&&(t=n),t=_.defaults({},t,_.templateSettings);var r,s=RegExp([(t.escape||G).source,(t.interpolate||G).source,(t.evaluate||G).source].join("|")+"|$","g"),i=0,o="__p+='";e.replace(s,function(t,n,r,s,a){return o+=e.slice(i,a).replace(Z,H),i=a+t.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),t}),o+="';\n",t.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(t.variable||"obj","_",o)}catch(e){throw e.source=o,e}var a=function(e){return r.call(this,e,_)},c=t.variable||"obj";return a.source="function("+c+"){\n"+o+"}",a},_.chain=function(e){var t=_(e);return t._chain=!0,t};var K=function(e,t){return e._chain?_(t).chain():t};_.mixin=function(e){return _.each(_.functions(e),function(t){var n=_[t]=e[t];_.prototype[t]=function(){var e=[this._wrapped];return c.apply(e,arguments),K(this,n.apply(_,e))}}),_},_.mixin(_),_.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=i[e];_.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],K(this,n)}}),_.each(["concat","join","slice"],function(e){var t=i[e];_.prototype[e]=function(){return K(this,t.apply(this._wrapped,arguments))}}),_.prototype.value=function(){return this._wrapped},_.prototype.valueOf=_.prototype.toJSON=_.prototype.value,_.prototype.toString=function(){return String(this._wrapped)},void 0===(n=function(){return _}.apply(t,[]))||(e.exports=n)}()}).call(this,n(41)(e))},function(e,t,n){"use strict";e.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),EMPTY_BUFFER:Buffer.alloc(0),NOOP:()=>{}}},function(e,t){e.exports=require("crypto")},function(e,t,n){"use strict";const r=n(23),s=n(24),i=n(4),{kStatusCode:o,NOOP:a}=n(1),c=Buffer.from([0,0,255,255]),u=Buffer.from([0]),l=Symbol("permessage-deflate"),d=Symbol("total-length"),f=Symbol("callback"),h=Symbol("buffers"),p=Symbol("error");let m;function _(e){this[h].push(e),this[d]+=e.length}function v(e){this[d]+=e.length,this[l]._maxPayload<1||this[d]<=this[l]._maxPayload?this[h].push(e):(this[p]=new RangeError("Max payload size exceeded"),this[p][o]=1009,this.removeListener("data",v),this.reset())}function g(e){this[l]._inflate=null,e[o]=1007,this[f](e)}e.exports=class{constructor(e,t,n){if(this._maxPayload=0|n,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!m){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;m=new r({concurrency:e})}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate&&(this._deflate.close(),this._deflate=null)}acceptAsServer(e){const t=this._options,n=e.find(e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits));if(!n)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(n.server_no_context_takeover=!0),t.clientNoContextTakeover&&(n.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(n.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?n.client_max_window_bits=t.clientMaxWindowBits:!0!==n.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete n.client_max_window_bits,n}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach(e=>{Object.keys(e).forEach(t=>{var n=e[t];if(n.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(n=n[0],"client_max_window_bits"===t){if(!0!==n){const e=+n;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${n}`);n=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${n}`)}else if("server_max_window_bits"===t){const e=+n;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${n}`);n=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==n)throw new TypeError(`Invalid value for parameter "${t}": ${n}`)}e[t]=n})}),e}decompress(e,t,n){m.push(r=>{this._decompress(e,t,(e,t)=>{r(),n(e,t)})})}compress(e,t,n){m.push(r=>{this._compress(e,t,(e,t)=>{r(),n(e,t)})})}_decompress(e,t,n){const r=this._isServer?"client":"server";if(!this._inflate){const e=`${r}_max_window_bits`,t="number"!=typeof this.params[e]?s.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=s.createInflateRaw(Object.assign({},this._options.zlibInflateOptions,{windowBits:t})),this._inflate[l]=this,this._inflate[d]=0,this._inflate[h]=[],this._inflate.on("error",g),this._inflate.on("data",v)}this._inflate[f]=n,this._inflate.write(e),t&&this._inflate.write(c),this._inflate.flush(()=>{const e=this._inflate[p];if(e)return this._inflate.close(),this._inflate=null,void n(e);const s=i.concat(this._inflate[h],this._inflate[d]);t&&this.params[`${r}_no_context_takeover`]?(this._inflate.close(),this._inflate=null):(this._inflate[d]=0,this._inflate[h]=[]),n(null,s)})}_compress(e,t,n){if(!e||0===e.length)return void process.nextTick(n,null,u);const r=this._isServer?"server":"client";if(!this._deflate){const e=`${r}_max_window_bits`,t="number"!=typeof this.params[e]?s.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=s.createDeflateRaw(Object.assign({},this._options.zlibDeflateOptions,{windowBits:t})),this._deflate[d]=0,this._deflate[h]=[],this._deflate.on("error",a),this._deflate.on("data",_)}this._deflate.write(e),this._deflate.flush(s.Z_SYNC_FLUSH,()=>{if(this._deflate){var e=i.concat(this._deflate[h],this._deflate[d]);t&&(e=e.slice(0,e.length-4)),t&&this.params[`${r}_no_context_takeover`]?(this._deflate.close(),this._deflate=null):(this._deflate[d]=0,this._deflate[h]=[]),n(null,e)}})}}},function(e,t,n){"use strict";function r(e,t){const n=Buffer.allocUnsafe(t);for(var r=0,s=0;s<e.length;s++){const t=e[s];t.copy(n,r),r+=t.length}return n}function s(e,t,n,r,s){for(var i=0;i<s;i++)n[r+i]=e[i]^t[3&i]}function i(e,t){const n=e.length;for(var r=0;r<n;r++)e[r]^=t[3&r]}try{const t=n(25),o=t.BufferUtil||t;e.exports={mask(e,t,n,r,i){i<48?s(e,t,n,r,i):o.mask(e,t,n,r,i)},unmask(e,t){e.length<32?i(e,t):o.unmask(e,t)},concat:r}}catch(t){e.exports={concat:r,mask:s,unmask:i}}},function(e,t,n){var r=n(45),s=n(46);t.write=s,t.parse=r.parse,t.parseFmtpConfig=r.parseFmtpConfig,t.parseParams=r.parseParams,t.parsePayloads=r.parsePayloads,t.parseRemoteCandidates=r.parseRemoteCandidates,t.parseImageAttributes=r.parseImageAttributes,t.parseSimulcastStreamList=r.parseSimulcastStreamList},function(e,t,n){"use strict";const r=n(7),s=n(2),i=n(19),o=n(8),a=n(20),c=n(21),u=n(22),l=n(3),d=n(30),f=n(10),h=n(1),p=n(11),m=n(13),_=["CONNECTING","OPEN","CLOSING","CLOSED"],v=h.kWebSocket,g=[8,13],y=3e4;class w extends r{constructor(e,t,n){super(),this.readyState=w.CONNECTING,this.protocol="",this._binaryType=h.BINARY_TYPES[0],this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage="",this._closeTimer=null,this._closeCode=1006,this._extensions={},this._isServer=!0,this._receiver=null,this._sender=null,this._socket=null,null!==e&&(Array.isArray(t)?t=t.join(", "):"object"==typeof t&&null!==t&&(n=t,t=void 0),function(e,t,n){if(n=Object.assign({protocolVersion:g[1],perMessageDeflate:!0,maxPayload:104857600},n,{createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,auth:void 0,host:void 0,path:void 0,port:void 0}),!g.includes(n.protocolVersion))throw new RangeError(`Unsupported protocol version: ${n.protocolVersion} `+`(supported versions: ${g.join(", ")})`);var r;this._isServer=!1,"object"==typeof e&&void 0!==e.href?(r=e,this.url=e.href):(r=u.URL?new u.URL(e):u.parse(e),this.url=e);const a="ws+unix:"===r.protocol;if(!(r.host||a&&r.pathname))throw new Error(`Invalid URL: ${this.url}`);const c="wss:"===r.protocol||"https:"===r.protocol,d=s.randomBytes(16).toString("base64"),p=c?i:o,m=r.search?`${r.pathname||"/"}${r.search}`:r.pathname||"/";var _;n.createConnection=c?S:b,n.port=r.port||(c?443:80),n.host=r.hostname.startsWith("[")?r.hostname.slice(1,-1):r.hostname,n.headers=Object.assign({"Sec-WebSocket-Version":n.protocolVersion,"Sec-WebSocket-Key":d,Connection:"Upgrade",Upgrade:"websocket"},n.headers),n.path=m,n.timeout=n.handshakeTimeout,n.perMessageDeflate&&(_=new l(!0!==n.perMessageDeflate?n.perMessageDeflate:{},!1,n.maxPayload),n.headers["Sec-WebSocket-Extensions"]=f.format({[l.extensionName]:_.offer()}));t&&(n.headers["Sec-WebSocket-Protocol"]=t);n.origin&&(n.protocolVersion<13?n.headers["Sec-WebSocket-Origin"]=n.origin:n.headers.Origin=n.origin);r.auth?n.auth=r.auth:(r.username||r.password)&&(n.auth=`${r.username}:${r.password}`);if(a){const e=m.split(":");n.socketPath=e[0],n.path=e[1]}var v=this._req=p.get(n);n.handshakeTimeout&&v.on("timeout",()=>{x(this,v,"Opening handshake has timed out")});v.on("error",e=>{this._req.aborted||(v=this._req=null,this.readyState=w.CLOSING,this.emit("error",e),this.emitClose())}),v.on("response",e=>{this.emit("unexpected-response",v,e)||x(this,v,`Unexpected server response: ${e.statusCode}`)}),v.on("upgrade",(e,r,i)=>{if(this.emit("upgrade",e),this.readyState!==w.CONNECTING)return;v=this._req=null;const o=s.createHash("sha1").update(d+h.GUID,"binary").digest("base64");if(e.headers["sec-websocket-accept"]!==o)return void x(this,r,"Invalid Sec-WebSocket-Accept header");const a=e.headers["sec-websocket-protocol"],c=(t||"").split(/, */);var u;if(!t&&a?u="Server sent a subprotocol but none was requested":t&&!a?u="Server sent no subprotocol":a&&!c.includes(a)&&(u="Server sent an invalid subprotocol"),u)x(this,r,u);else{if(a&&(this.protocol=a),_)try{const t=f.parse(e.headers["sec-websocket-extensions"]);t[l.extensionName]&&(_.accept(t[l.extensionName]),this._extensions[l.extensionName]=_)}catch(e){return void x(this,r,"Invalid Sec-WebSocket-Extensions header")}this.setSocket(r,i,n.maxPayload)}})}.call(this,e,t,n))}get CONNECTING(){return w.CONNECTING}get CLOSING(){return w.CLOSING}get CLOSED(){return w.CLOSED}get OPEN(){return w.OPEN}get binaryType(){return this._binaryType}set binaryType(e){h.BINARY_TYPES.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?(this._socket.bufferSize||0)+this._sender._bufferedBytes:0}get extensions(){return Object.keys(this._extensions).join()}setSocket(e,t,n){const r=new p(this._binaryType,this._extensions,n);this._sender=new m(e,this._extensions),this._receiver=r,this._socket=e,r[v]=this,e[v]=this,r.on("conclude",k),r.on("drain",O),r.on("error",E),r.on("message",I),r.on("ping",j),r.on("pong",P),e.setTimeout(0),e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",T),e.on("data",B),e.on("end",A),e.on("error",C),this.readyState=w.OPEN,this.emit("open")}emitClose(){this.readyState=w.CLOSED,this._socket?(this._extensions[l.extensionName]&&this._extensions[l.extensionName].cleanup(),this._receiver.removeAllListeners(),this.emit("close",this._closeCode,this._closeMessage)):this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==w.CLOSED){if(this.readyState===w.CONNECTING){const e="WebSocket was closed before the connection was established";return x(this,this._req,e)}this.readyState!==w.CLOSING?(this.readyState=w.CLOSING,this._sender.close(e,t,!this._isServer,e=>{e||(this._closeFrameSent=!0,this._socket.writable&&(this._closeFrameReceived&&this._socket.end(),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),y)))})):this._closeFrameSent&&this._closeFrameReceived&&this._socket.end()}}ping(e,t,n){if("function"==typeof e?(n=e,e=t=void 0):"function"==typeof t&&(n=t,t=void 0),this.readyState!==w.OPEN){const e=new Error(`WebSocket is not open: readyState ${this.readyState} `+`(${_[this.readyState]})`);if(n)return n(e);throw e}"number"==typeof e&&(e=e.toString()),void 0===t&&(t=!this._isServer),this._sender.ping(e||h.EMPTY_BUFFER,t,n)}pong(e,t,n){if("function"==typeof e?(n=e,e=t=void 0):"function"==typeof t&&(n=t,t=void 0),this.readyState!==w.OPEN){const e=new Error(`WebSocket is not open: readyState ${this.readyState} `+`(${_[this.readyState]})`);if(n)return n(e);throw e}"number"==typeof e&&(e=e.toString()),void 0===t&&(t=!this._isServer),this._sender.pong(e||h.EMPTY_BUFFER,t,n)}send(e,t,n){if("function"==typeof t&&(n=t,t={}),this.readyState!==w.OPEN){const e=new Error(`WebSocket is not open: readyState ${this.readyState} `+`(${_[this.readyState]})`);if(n)return n(e);throw e}"number"==typeof e&&(e=e.toString());const r=Object.assign({binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0},t);this._extensions[l.extensionName]||(r.compress=!1),this._sender.send(e||h.EMPTY_BUFFER,r,n)}terminate(){if(this.readyState!==w.CLOSED){if(this.readyState===w.CONNECTING){const e="WebSocket was closed before the connection was established";return x(this,this._req,e)}this._socket&&(this.readyState=w.CLOSING,this._socket.destroy())}}}function b(e){return e.protocolVersion&&(e.path=e.socketPath),a.connect(e)}function S(e){return e.path=void 0,e.servername=e.servername||e.host,c.connect(e)}function x(e,t,n){e.readyState=w.CLOSING;const r=new Error(n);Error.captureStackTrace(r,x),t.setHeader?(t.abort(),t.once("abort",e.emitClose.bind(e)),e.emit("error",r)):(t.destroy(r),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function k(e,t){const n=this[v];n._socket.removeListener("data",B),n._socket.resume(),n._closeFrameReceived=!0,n._closeMessage=t,n._closeCode=e,1005===e?n.close():n.close(e,t)}function O(){this[v]._socket.resume()}function E(e){const t=this[v];t._socket.removeListener("data",B),t.readyState=w.CLOSING,t._closeCode=e[h.kStatusCode],t.emit("error",e),t._socket.destroy()}function N(){this[v].emitClose()}function I(e){this[v].emit("message",e)}function j(e){const t=this[v];t.pong(e,!t._isServer,h.NOOP),t.emit("ping",e)}function P(e){this[v].emit("pong",e)}function T(){const e=this[v];this.removeListener("close",T),this.removeListener("end",A),e.readyState=w.CLOSING,e._socket.read(),e._receiver.end(),this.removeListener("data",B),this[v]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",N),e._receiver.on("finish",N))}function B(e){this[v]._receiver.write(e)||this.pause()}function A(){const e=this[v];e.readyState=w.CLOSING,e._receiver.end(),this.end()}function C(){const e=this[v];this.removeListener("error",C),this.on("error",h.NOOP),e&&(e.readyState=w.CLOSING,this.destroy())}_.forEach((e,t)=>{w[e]=t}),["open","error","close","message"].forEach(e=>{Object.defineProperty(w.prototype,`on${e}`,{get(){const t=this.listeners(e);for(var n=0;n<t.length;n++)if(t[n]._listener)return t[n]._listener},set(t){const n=this.listeners(e);for(var r=0;r<n.length;r++)n[r]._listener&&this.removeListener(e,n[r]);this.addEventListener(e,t)}})}),w.prototype.addEventListener=d.addEventListener,w.prototype.removeEventListener=d.removeEventListener,e.exports=w},function(e,t){e.exports=require("events")},function(e,t){e.exports=require("http")},function(e,t,n){var r=n(26),s=n(27),i=n(28),o=require,a=process.versions.modules,c=process.versions&&process.versions.electron||process.env.ELECTRON_RUN_AS_NODE||"undefined"!=typeof window&&window.process&&"renderer"===window.process.type?"electron":"node",u=i.arch(),l=i.platform();function d(e){return o(d.path(e))}function f(e,t){try{var n=r.readdirSync(e).filter(t);return n[0]&&s.join(e,n[0])}catch(e){return null}}function h(e){return e===c+"-napi.node"}function p(e){return"node-napi.node"===e}function m(e){var t=e.split("-");return t[0]===c&&t[1]===a+".node"}function _(e){return/\.node$/.test(e)}e.exports=d,d.path=function(e){e=s.resolve(e||".");try{var t=o(s.join(e,"package.json")).name.toUpperCase().replace(/-/g,"_");process.env[t+"_PREBUILD"]&&(e=process.env[t+"_PREBUILD"])}catch(e){}var n=f(s.join(e,"build/Release"),_);if(n)return n;var r=f(s.join(e,"build/Debug"),_);if(r)return r;var i=f(s.join(e,"prebuilds/"+l+"-"+u),m);if(i)return i;var d=f(s.join(e,"prebuilds/"+l+"-"+u),h);if(d)return d;var v=f(s.join(e,"prebuilds/"+l+"-"+u),p);if(v)return v;throw new Error("No native build was found for runtime="+c+" abi="+a+" platform="+l+" arch="+u)}},function(e,t,n){"use strict";const r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function s(e,t,n){Object.prototype.hasOwnProperty.call(e,t)?e[t].push(n):e[t]=[n]}e.exports={format:function(e){return Object.keys(e).map(t=>{var n=e[t];return Array.isArray(n)||(n=[n]),n.map(e=>[t].concat(Object.keys(e).map(t=>{var n=e[t];return Array.isArray(n)||(n=[n]),n.map(e=>!0===e?t:`${t}=${e}`).join("; ")})).join("; ")).join(", ")}).join(", ")},parse:function(e){const t={};if(void 0===e||""===e)return t;for(var n,i,o={},a=!1,c=!1,u=!1,l=-1,d=-1,f=0;f<e.length;f++){const p=e.charCodeAt(f);if(void 0===n)if(-1===d&&1===r[p])-1===l&&(l=f);else if(32===p||9===p)-1===d&&-1!==l&&(d=f);else{if(59!==p&&44!==p)throw new SyntaxError(`Unexpected character at index ${f}`);{if(-1===l)throw new SyntaxError(`Unexpected character at index ${f}`);-1===d&&(d=f);const r=e.slice(l,d);44===p?(s(t,r,o),o={}):n=r,l=d=-1}}else if(void 0===i)if(-1===d&&1===r[p])-1===l&&(l=f);else if(32===p||9===p)-1===d&&-1!==l&&(d=f);else if(59===p||44===p){if(-1===l)throw new SyntaxError(`Unexpected character at index ${f}`);-1===d&&(d=f),s(o,e.slice(l,d),!0),44===p&&(s(t,n,o),o={},n=void 0),l=d=-1}else{if(61!==p||-1===l||-1!==d)throw new SyntaxError(`Unexpected character at index ${f}`);i=e.slice(l,f),l=d=-1}else if(c){if(1!==r[p])throw new SyntaxError(`Unexpected character at index ${f}`);-1===l?l=f:a||(a=!0),c=!1}else if(u)if(1===r[p])-1===l&&(l=f);else if(34===p&&-1!==l)u=!1,d=f;else{if(92!==p)throw new SyntaxError(`Unexpected character at index ${f}`);c=!0}else if(34===p&&61===e.charCodeAt(f-1))u=!0;else if(-1===d&&1===r[p])-1===l&&(l=f);else if(-1===l||32!==p&&9!==p){if(59!==p&&44!==p)throw new SyntaxError(`Unexpected character at index ${f}`);if(-1===l)throw new SyntaxError(`Unexpected character at index ${f}`);-1===d&&(d=f);var h=e.slice(l,d);a&&(h=h.replace(/\\/g,""),a=!1),s(o,i,h),44===p&&(s(t,n,o),o={},n=void 0),i=void 0,l=d=-1}else-1===d&&(d=f)}if(-1===l||u)throw new SyntaxError("Unexpected end of input");-1===d&&(d=f);const p=e.slice(l,d);return void 0===n?s(t,p,{}):(void 0===i?s(o,p,!0):s(o,i,a?p.replace(/\\/g,""):p),s(t,n,o)),t}}},function(e,t,n){"use strict";const r=n(31),s=n(3),i=n(4),o=n(12),a=n(1),c=0,u=1,l=2,d=3,f=4,h=5;function p(e,t,n,r){const s=new e(n?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(s,p),s[a.kStatusCode]=r,s}function m(e,t){return 1===e.length?e[0]:e.length>1?i.concat(e,t):a.EMPTY_BUFFER}e.exports=class extends r.Writable{constructor(e,t,n){super(),this._binaryType=e||a.BINARY_TYPES[0],this[a.kWebSocket]=void 0,this._extensions=t||{},this._maxPayload=0|n,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=c,this._loop=!1}_write(e,t,n){if(8===this._opcode&&this._state==c)return n();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(n)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=t.slice(e),t.slice(0,e)}const t=Buffer.allocUnsafe(e);do{const n=this._buffers[0];e>=n.length?this._buffers.shift().copy(t,t.length-e):(n.copy(t,t.length-e,0,e),this._buffers[0]=n.slice(e)),e-=n.length}while(e>0);return t}startLoop(e){var t;this._loop=!0;do{switch(this._state){case c:t=this.getInfo();break;case u:t=this.getPayloadLength16();break;case l:t=this.getPayloadLength64();break;case d:this.getMask();break;case f:t=this.getData(e);break;default:return void(this._loop=!1)}}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2)return void(this._loop=!1);const e=this.consume(2);if(0!=(48&e[0]))return this._loop=!1,p(RangeError,"RSV2 and RSV3 must be clear",!0,1002);const t=64==(64&e[0]);if(t&&!this._extensions[s.extensionName])return this._loop=!1,p(RangeError,"RSV1 must be clear",!0,1002);if(this._fin=128==(128&e[0]),this._opcode=15&e[0],this._payloadLength=127&e[1],0===this._opcode){if(t)return this._loop=!1,p(RangeError,"RSV1 must be clear",!0,1002);if(!this._fragmented)return this._loop=!1,p(RangeError,"invalid opcode 0",!0,1002);this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,p(RangeError,`invalid opcode ${this._opcode}`,!0,1002);this._compressed=t}else{if(!(this._opcode>7&&this._opcode<11))return this._loop=!1,p(RangeError,`invalid opcode ${this._opcode}`,!0,1002);if(!this._fin)return this._loop=!1,p(RangeError,"FIN must be set",!0,1002);if(t)return this._loop=!1,p(RangeError,"RSV1 must be clear",!0,1002);if(this._payloadLength>125)return this._loop=!1,p(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002)}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=128==(128&e[1]),126===this._payloadLength)this._state=u;else{if(127!==this._payloadLength)return this.haveLength();this._state=l}}getPayloadLength16(){if(!(this._bufferedBytes<2))return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength();this._loop=!1}getPayloadLength64(){if(this._bufferedBytes<8)return void(this._loop=!1);const e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,21)-1?(this._loop=!1,p(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009)):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,p(RangeError,"Max payload size exceeded",!1,1009);this._masked?this._state=d:this._state=f}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=f)}getData(e){var t=a.EMPTY_BUFFER;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&i.unmask(t,this._mask)}return this._opcode>7?this.controlMessage(t):this._compressed?(this._state=h,void this.decompress(t,e)):(t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage())}decompress(e,t){this._extensions[s.extensionName].decompress(e,this._fin,(e,n)=>{if(e)return t(e);if(n.length){if(this._messageLength+=n.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return t(p(RangeError,"Max payload size exceeded",!1,1009));this._fragments.push(n)}const r=this.dataMessage();if(r)return t(r);this.startLoop(t)})}dataMessage(){if(this._fin){const n=this._messageLength,r=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){var e;e="nodebuffer"===this._binaryType?m(r,n):"arraybuffer"===this._binaryType?(t=m(r,n)).byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength):r,this.emit("message",e)}else{const e=m(r,n);if(!o.isValidUTF8(e))return this._loop=!1,p(Error,"invalid UTF-8 sequence",!0,1007);this.emit("message",e.toString())}}var t;this._state=c}controlMessage(e){if(8===this._opcode)if(this._loop=!1,0===e.length)this.emit("conclude",1005,""),this.end();else{if(1===e.length)return p(RangeError,"invalid payload length 1",!0,1002);{const t=e.readUInt16BE(0);if(!o.isValidStatusCode(t))return p(RangeError,`invalid status code ${t}`,!0,1002);const n=e.slice(2);if(!o.isValidUTF8(n))return p(Error,"invalid UTF-8 sequence",!0,1007);this.emit("conclude",t,n.toString()),this.end()}}else 9===this._opcode?this.emit("ping",e):this.emit("pong",e);this._state=c}}},function(e,t,n){"use strict";try{const e=n(32);t.isValidUTF8="object"==typeof e?e.Validation.isValidUTF8:e}catch(e){t.isValidUTF8=(()=>!0)}t.isValidStatusCode=(e=>e>=1e3&&e<=1013&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999)},function(e,t,n){"use strict";const r=n(2),s=n(3),i=n(4),o=n(12),a=n(1);class c{constructor(e,t){this._extensions=t||{},this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){const n=e.length<1024||t.mask&&t.readOnly;var s=t.mask?6:2,o=e.length;e.length>=65536?(s+=8,o=127):e.length>125&&(s+=2,o=126);const a=Buffer.allocUnsafe(n?e.length+s:s);if(a[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(a[0]|=64),126===o?a.writeUInt16BE(e.length,2):127===o&&(a.writeUInt32BE(0,2),a.writeUInt32BE(e.length,6)),!t.mask)return a[1]=o,n?(e.copy(a,s),[a]):[a,e];const c=r.randomBytes(4);return a[1]=128|o,a[s-4]=c[0],a[s-3]=c[1],a[s-2]=c[2],a[s-1]=c[3],n?(i.mask(e,c,a,s,e.length),[a]):(i.mask(e,c,e,0,e.length),[a,e])}close(e,t,n,r){var s;if(void 0===e)s=a.EMPTY_BUFFER;else{if("number"!=typeof e||!o.isValidStatusCode(e))throw new TypeError("First argument must be a valid error code number");void 0===t||""===t?(s=Buffer.allocUnsafe(2)).writeUInt16BE(e,0):((s=Buffer.allocUnsafe(2+Buffer.byteLength(t))).writeUInt16BE(e,0),s.write(t,2))}this._deflating?this.enqueue([this.doClose,s,n,r]):this.doClose(s,n,r)}doClose(e,t,n){this.sendFrame(c.frame(e,{fin:!0,rsv1:!1,opcode:8,mask:t,readOnly:!1}),n)}ping(e,t,n){var r=!0;Buffer.isBuffer(e)||(e instanceof ArrayBuffer?e=Buffer.from(e):ArrayBuffer.isView(e)?e=u(e):(e=Buffer.from(e),r=!1)),this._deflating?this.enqueue([this.doPing,e,t,r,n]):this.doPing(e,t,r,n)}doPing(e,t,n,r){this.sendFrame(c.frame(e,{fin:!0,rsv1:!1,opcode:9,mask:t,readOnly:n}),r)}pong(e,t,n){var r=!0;Buffer.isBuffer(e)||(e instanceof ArrayBuffer?e=Buffer.from(e):ArrayBuffer.isView(e)?e=u(e):(e=Buffer.from(e),r=!1)),this._deflating?this.enqueue([this.doPong,e,t,r,n]):this.doPong(e,t,r,n)}doPong(e,t,n,r){this.sendFrame(c.frame(e,{fin:!0,rsv1:!1,opcode:10,mask:t,readOnly:n}),r)}send(e,t,n){var r=t.binary?2:1,i=t.compress,o=!0;Buffer.isBuffer(e)||(e instanceof ArrayBuffer?e=Buffer.from(e):ArrayBuffer.isView(e)?e=u(e):(e=Buffer.from(e),o=!1));const a=this._extensions[s.extensionName];if(this._firstFragment?(this._firstFragment=!1,i&&a&&(i=e.length>=a._threshold),this._compress=i):(i=!1,r=0),t.fin&&(this._firstFragment=!0),a){const s={fin:t.fin,rsv1:i,opcode:r,mask:t.mask,readOnly:o};this._deflating?this.enqueue([this.dispatch,e,this._compress,s,n]):this.dispatch(e,this._compress,s,n)}else this.sendFrame(c.frame(e,{fin:t.fin,rsv1:!1,opcode:r,mask:t.mask,readOnly:o}),n)}dispatch(e,t,n,r){if(!t)return void this.sendFrame(c.frame(e,n),r);const i=this._extensions[s.extensionName];this._deflating=!0,i.compress(e,n.fin,(e,t)=>{this._deflating=!1,n.readOnly=!1,this.sendFrame(c.frame(t,n),r),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[1].length,e[0].apply(this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[1].length,this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.write(e[0]),this._socket.write(e[1],t)):this._socket.write(e[0],t)}}function u(e){const t=Buffer.from(e.buffer);return e.byteLength!==e.buffer.byteLength?t.slice(e.byteOffset,e.byteOffset+e.byteLength):t}e.exports=c},function(e,t,n){var r=n(2);e.exports=function(){return r.randomBytes(16)}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,s=n;return[s[e[r++]],s[e[r++]],s[e[r++]],s[e[r++]],"-",s[e[r++]],s[e[r++]],"-",s[e[r++]],s[e[r++]],"-",s[e[r++]],s[e[r++]],"-",s[e[r++]],s[e[r++]],s[e[r++]],s[e[r++]],s[e[r++]],s[e[r++]]].join("")}},function(e,t){var n=e.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w\/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-\.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%d trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))? (\S*)(?: (\S*))?/,names:["value","direction","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+" %s"+(e.config?" %s":"")}},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t+=null!=e["network-id"]?" network-id %d":"%v",t+=null!=e["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_\/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"invalid",names:["value"]}]};Object.keys(n).forEach(function(e){n[e].forEach(function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")})})},function(e,t,n){"use strict";const r=n(6);r.Server=n(34),r.Receiver=n(11),r.Sender=n(13),e.exports=r},function(e,t,n){var r;r=function(){var e=!0;function t(t){function n(e){var n=t.match(e);return n&&n.length>1&&n[1]||""}function r(e){var n=t.match(e);return n&&n.length>1&&n[2]||""}var s,o=n(/(ipod|iphone|ipad)/i).toLowerCase(),a=!/like android/i.test(t)&&/android/i.test(t),c=/nexus\s*[0-6]\s*/i.test(t),u=!c&&/nexus\s*[0-9]+/i.test(t),l=/CrOS/.test(t),d=/silk/i.test(t),f=/sailfish/i.test(t),h=/tizen/i.test(t),p=/(web|hpw)(o|0)s/i.test(t),m=/windows phone/i.test(t),_=(/SamsungBrowser/i.test(t),!m&&/windows/i.test(t)),v=!o&&!d&&/macintosh/i.test(t),g=!a&&!f&&!h&&!p&&/linux/i.test(t),y=r(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),w=n(/version\/(\d+(\.\d+)?)/i),b=/tablet/i.test(t)&&!/tablet pc/i.test(t),S=!b&&/[^-]mobi/i.test(t),x=/xbox/i.test(t);/opera/i.test(t)?s={name:"Opera",opera:e,version:w||n(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(t)?s={name:"Opera",opera:e,version:n(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||w}:/SamsungBrowser/i.test(t)?s={name:"Samsung Internet for Android",samsungBrowser:e,version:w||n(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/Whale/i.test(t)?s={name:"NAVER Whale browser",whale:e,version:n(/(?:whale)[\s\/](\d+(?:\.\d+)+)/i)}:/MZBrowser/i.test(t)?s={name:"MZ Browser",mzbrowser:e,version:n(/(?:MZBrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/coast/i.test(t)?s={name:"Opera Coast",coast:e,version:w||n(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/focus/i.test(t)?s={name:"Focus",focus:e,version:n(/(?:focus)[\s\/](\d+(?:\.\d+)+)/i)}:/yabrowser/i.test(t)?s={name:"Yandex Browser",yandexbrowser:e,version:w||n(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(t)?s={name:"UC Browser",ucbrowser:e,version:n(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(t)?s={name:"Maxthon",maxthon:e,version:n(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(t)?s={name:"Epiphany",epiphany:e,version:n(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(t)?s={name:"Puffin",puffin:e,version:n(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(t)?s={name:"Sleipnir",sleipnir:e,version:n(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(t)?s={name:"K-Meleon",kMeleon:e,version:n(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:m?(s={name:"Windows Phone",osname:"Windows Phone",windowsphone:e},y?(s.msedge=e,s.version=y):(s.msie=e,s.version=n(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(t)?s={name:"Internet Explorer",msie:e,version:n(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:l?s={name:"Chrome",osname:"Chrome OS",chromeos:e,chromeBook:e,chrome:e,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(t)?s={name:"Microsoft Edge",msedge:e,version:y}:/vivaldi/i.test(t)?s={name:"Vivaldi",vivaldi:e,version:n(/vivaldi\/(\d+(\.\d+)?)/i)||w}:f?s={name:"Sailfish",osname:"Sailfish OS",sailfish:e,version:n(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(t)?s={name:"SeaMonkey",seamonkey:e,version:n(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(t)?(s={name:"Firefox",firefox:e,version:n(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(t)&&(s.firefoxos=e,s.osname="Firefox OS")):d?s={name:"Amazon Silk",silk:e,version:n(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(t)?s={name:"PhantomJS",phantom:e,version:n(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(t)?s={name:"SlimerJS",slimer:e,version:n(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(t)||/rim\stablet/i.test(t)?s={name:"BlackBerry",osname:"BlackBerry OS",blackberry:e,version:w||n(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:p?(s={name:"WebOS",osname:"WebOS",webos:e,version:w||n(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(t)&&(s.touchpad=e)):/bada/i.test(t)?s={name:"Bada",osname:"Bada",bada:e,version:n(/dolfin\/(\d+(\.\d+)?)/i)}:h?s={name:"Tizen",osname:"Tizen",tizen:e,version:n(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||w}:/qupzilla/i.test(t)?s={name:"QupZilla",qupzilla:e,version:n(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||w}:/chromium/i.test(t)?s={name:"Chromium",chromium:e,version:n(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||w}:/chrome|crios|crmo/i.test(t)?s={name:"Chrome",chrome:e,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:a?s={name:"Android",version:w}:/safari|applewebkit/i.test(t)?(s={name:"Safari",safari:e},w&&(s.version=w)):o?(s={name:"iphone"==o?"iPhone":"ipad"==o?"iPad":"iPod"},w&&(s.version=w)):s=/googlebot/i.test(t)?{name:"Googlebot",googlebot:e,version:n(/googlebot\/(\d+(\.\d+))/i)||w}:{name:n(/^(.*)\/(.*) /),version:r(/^(.*)\/(.*) /)},!s.msedge&&/(apple)?webkit/i.test(t)?(/(apple)?webkit\/537\.36/i.test(t)?(s.name=s.name||"Blink",s.blink=e):(s.name=s.name||"Webkit",s.webkit=e),!s.version&&w&&(s.version=w)):!s.opera&&/gecko\//i.test(t)&&(s.name=s.name||"Gecko",s.gecko=e,s.version=s.version||n(/gecko\/(\d+(\.\d+)?)/i)),s.windowsphone||!a&&!s.silk?!s.windowsphone&&o?(s[o]=e,s.ios=e,s.osname="iOS"):v?(s.mac=e,s.osname="macOS"):x?(s.xbox=e,s.osname="Xbox"):_?(s.windows=e,s.osname="Windows"):g&&(s.linux=e,s.osname="Linux"):(s.android=e,s.osname="Android");var k="";s.windows?k=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}(n(/Windows ((NT|XP)( \d\d?.\d)?)/i)):s.windowsphone?k=n(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):s.mac?k=(k=n(/Mac OS X (\d+([_\.\s]\d+)*)/i)).replace(/[_\s]/g,"."):o?k=(k=n(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):a?k=n(/android[ \/-](\d+(\.\d+)*)/i):s.webos?k=n(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):s.blackberry?k=n(/rim\stablet\sos\s(\d+(\.\d+)*)/i):s.bada?k=n(/bada\/(\d+(\.\d+)*)/i):s.tizen&&(k=n(/tizen[\/\s](\d+(\.\d+)*)/i)),k&&(s.osversion=k);var O=!s.windows&&k.split(".")[0];return b||u||"ipad"==o||a&&(3==O||O>=4&&!S)||s.silk?s.tablet=e:(S||"iphone"==o||"ipod"==o||a||c||s.blackberry||s.webos||s.bada)&&(s.mobile=e),s.msedge||s.msie&&s.version>=10||s.yandexbrowser&&s.version>=15||s.vivaldi&&s.version>=1||s.chrome&&s.version>=20||s.samsungBrowser&&s.version>=4||s.whale&&1===i([s.version,"1.0"])||s.mzbrowser&&1===i([s.version,"6.0"])||s.focus&&1===i([s.version,"1.0"])||s.firefox&&s.version>=20||s.safari&&s.version>=6||s.opera&&s.version>=10||s.ios&&s.osversion&&s.osversion.split(".")[0]>=6||s.blackberry&&s.version>=10.1||s.chromium&&s.version>=20?s.a=e:s.msie&&s.version<10||s.chrome&&s.version<20||s.firefox&&s.version<20||s.safari&&s.version<6||s.opera&&s.version<10||s.ios&&s.osversion&&s.osversion.split(".")[0]<6||s.chromium&&s.version<20?s.c=e:s.x=e,s}var n=t("undefined"!=typeof navigator&&navigator.userAgent||"");function r(e){return e.split(".").length}function s(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n++)r.push(t(e[n]));return r}function i(e){for(var t=Math.max(r(e[0]),r(e[1])),n=s(e,function(e){var n=t-r(e);return s((e+=new Array(n+1).join(".0")).split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});--t>=0;){if(n[0][t]>n[1][t])return 1;if(n[0][t]!==n[1][t])return-1;if(0===t)return 0}}function o(e,r,s){var o=n;"string"==typeof r&&(s=r,r=void 0),void 0===r&&(r=!1),s&&(o=t(s));var a=""+o.version;for(var c in e)if(e.hasOwnProperty(c)&&o[c]){if("string"!=typeof e[c])throw new Error("Browser version in the minVersion map should be a string: "+c+": "+String(e));return i([a,e[c]])<0}return r}return n.test=function(e){for(var t=0;t<e.length;++t){var r=e[t];if("string"==typeof r&&r in n)return!0}return!1},n.isUnsupportedBrowser=o,n.compareVersions=i,n.check=function(e,t,n){return!o(e,t,n)},n._detect=t,n.detect=t,n},e.exports?e.exports=r():n(47)("bowser",r)},function(e,t){e.exports=require("https")},function(e,t){e.exports=require("net")},function(e,t){e.exports=require("tls")},function(e,t){e.exports=require("url")},function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);e=e||{},this.concurrency=e.concurrency||1/0,this.pending=0,this.jobs=[],this.cbs=[],this._done=function(){this.pending--,this._run()}.bind(this)}["push","unshift","splice"].forEach(function(e){r.prototype[e]=function(){var t=Array.prototype[e].apply(this.jobs,arguments);return this._run(),t}}),Object.defineProperty(r.prototype,"length",{get:function(){return this.pending+this.jobs.length}}),r.prototype._run=function(){if(this.pending!==this.concurrency){if(this.jobs.length){var e=this.jobs.shift();this.pending++,e(this._done),this._run()}if(0===this.pending)for(;0!==this.cbs.length;){var t=this.cbs.pop();process.nextTick(t)}}},r.prototype.onDone=function(e){"function"==typeof e&&(this.cbs.push(e),this._run())},e.exports=r},function(e,t){e.exports=require("zlib")},function(e,t,n){"use strict";(function(t){try{e.exports=n(9)(t)}catch(t){e.exports=n(29)}}).call(this,"/")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("os")},function(e,t,n){"use strict";e.exports={mask:(e,t,n,r,s)=>{for(var i=0;i<s;i++)n[r+i]=e[i]^t[3&i]},unmask:(e,t)=>{const n=e.length;for(var r=0;r<n;r++)e[r]^=t[3&r]}}},function(e,t,n){"use strict";class r{constructor(e,t){this.target=t,this.type=e}}class s extends r{constructor(e,t){super("message",t),this.data=e}}class i extends r{constructor(e,t,n){super("close",n),this.wasClean=n._closeFrameReceived&&n._closeFrameSent,this.reason=t,this.code=e}}class o extends r{constructor(e){super("open",e)}}class a extends r{constructor(e,t){super("error",t),this.message=e.message,this.error=e}}const c={addEventListener(e,t){function n(e){t.call(this,new s(e,this))}function r(e,n){t.call(this,new i(e,n,this))}function c(e){t.call(this,new a(e,this))}function u(){t.call(this,new o(this))}"function"==typeof t&&("message"===e?(n._listener=t,this.on(e,n)):"close"===e?(r._listener=t,this.on(e,r)):"error"===e?(c._listener=t,this.on(e,c)):"open"===e?(u._listener=t,this.on(e,u)):this.on(e,t))},removeEventListener(e,t){const n=this.listeners(e);for(var r=0;r<n.length;r++)n[r]!==t&&n[r]._listener!==t||this.removeListener(e,n[r])}};e.exports=c},function(e,t){e.exports=require("stream")},function(e,t,n){"use strict";(function(t){try{e.exports=n(9)(t)}catch(t){e.exports=n(33)}}).call(this,"/")},function(e,t,n){"use strict";e.exports=(e=>{for(var t=e.length,n=0;n<t;)if(e[n]<128)n++;else if(192==(224&e[n])){if(n+1===t||128!=(192&e[n+1])||192==(254&e[n]))return!1;n+=2}else if(224==(240&e[n])){if(n+2>=t||128!=(192&e[n+1])||128!=(192&e[n+2])||224===e[n]&&128==(224&e[n+1])||237===e[n]&&160==(224&e[n+1]))return!1;n+=3}else{if(240!=(248&e[n]))return!1;if(n+3>=t||128!=(192&e[n+1])||128!=(192&e[n+2])||128!=(192&e[n+3])||240===e[n]&&128==(240&e[n+1])||244===e[n]&&e[n+1]>143||e[n]>244)return!1;n+=4}return!0})},function(e,t,n){"use strict";const r=n(7),s=n(2),i=n(8),o=n(3),a=n(10),c=n(1),u=n(6);function l(e){e.emit("close")}function d(){this.destroy()}function f(e,t,n,r){e.writable&&(n=n||i.STATUS_CODES[t],r=Object.assign({Connection:"close","Content-type":"text/html","Content-Length":Buffer.byteLength(n)},r),e.write(`HTTP/1.1 ${t} ${i.STATUS_CODES[t]}\r\n`+Object.keys(r).map(e=>`${e}: ${r[e]}`).join("\r\n")+"\r\n\r\n"+n)),e.removeListener("error",d),e.destroy()}e.exports=class extends r{constructor(e,t){if(super(),null==(e=Object.assign({maxPayload:104857600,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null},e)).port&&!e.server&&!e.noServer)throw new TypeError('One of the "port", "server", or "noServer" options must be specified');null!=e.port?(this._server=i.createServer((e,t)=>{const n=i.STATUS_CODES[426];t.writeHead(426,{"Content-Length":n.length,"Content-Type":"text/plain"}),t.end(n)}),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server&&(this._removeListeners=function(e,t){for(const n of Object.keys(t))e.on(n,t[n]);return function(){for(const n of Object.keys(t))e.removeListener(n,t[n])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(e,t,n)=>{this.handleUpgrade(e,t,n,t=>{this.emit("connection",t,e)})}})),!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set),this.options=e}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(e&&this.once("close",e),this.clients)for(const e of this.clients)e.terminate();const t=this._server;t&&(this._removeListeners(),this._removeListeners=this._server=null,null!=this.options.port)?t.close(()=>this.emit("close")):process.nextTick(l,this)}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,n,r){t.on("error",d);const s=+e.headers["sec-websocket-version"],i={};if("GET"!==e.method||"websocket"!==e.headers.upgrade.toLowerCase()||!e.headers["sec-websocket-key"]||8!==s&&13!==s||!this.shouldHandle(e))return f(t,400);if(this.options.perMessageDeflate){const n=new o(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const r=a.parse(e.headers["sec-websocket-extensions"]);r[o.extensionName]&&(n.accept(r[o.extensionName]),i[o.extensionName]=n)}catch(e){return f(t,400)}}if(this.options.verifyClient){const o={origin:e.headers[`${8===s?"sec-websocket-origin":"origin"}`],secure:!(!e.connection.authorized&&!e.connection.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(o,(s,o,a,c)=>{if(!s)return f(t,o||401,a,c);this.completeUpgrade(i,e,t,n,r)});if(!this.options.verifyClient(o))return f(t,401)}this.completeUpgrade(i,e,t,n,r)}completeUpgrade(e,t,n,r,i){if(!n.readable||!n.writable)return n.destroy();const l=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${s.createHash("sha1").update(t.headers["sec-websocket-key"]+c.GUID,"binary").digest("base64")}`],f=new u(null);var h=t.headers["sec-websocket-protocol"];if(h&&(h=h.trim().split(/ *, */),(h=this.options.handleProtocols?this.options.handleProtocols(h,t):h[0])&&(l.push(`Sec-WebSocket-Protocol: ${h}`),f.protocol=h)),e[o.extensionName]){const t=e[o.extensionName].params,n=a.format({[o.extensionName]:[t]});l.push(`Sec-WebSocket-Extensions: ${n}`),f._extensions=e}this.emit("headers",l,t),n.write(l.concat("\r\n").join("\r\n")),n.removeListener("error",d),f.setSocket(n,r,this.options.maxPayload),this.clients&&(this.clients.add(f),f.on("close",()=>this.clients.delete(f))),i(f)}}},function(e,t,n){var r={"./en_EN.json":36,"./pl_PL.json":37};function s(e){var t=i(e);return n(t)}function i(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}s.keys=function(){return Object.keys(r)},s.resolve=i,e.exports=s,s.id=35},function(e){e.exports={}},function(e){e.exports={"Parameter {pname} given to function {fname}() is not an expected type {ptype}":"Parametr {pname} przekazany do funkcji {fname}() nie jest oczekiwanego typu {ptype}","The user (id = {uid}) is already a member of the session (id = {sid})":"Użytkownik (id = {uid}) jest już członkiem sesji (id = {sid})","The user (id = {uid}) is not a member of the session (id = {sid})":"Użytkownik (id = {uid}) nie jest członkiem sesji (id = {sid})","JSON format of variable {vname} in function {fname}() is wrong":"Format JSON zmiennej {vname} w funkcji {fname}() jest nieprawidłowy","Constraint {cname} has been used in wrong way":"Ograniczenie {cname} zostało użyte w nieprawidłowy sposób","Value {vname} does not meet expected value {exname} of the constraint {cname}":"Wartość {vname} nie spełnia oczekiwanej wartości {exname} ograniczenia {cname}","The given authentication data are incorrect for user {uname}":"Podane dane uwierzytelniające są nieprawidłowe dla użytkownika {uname}","User {uname} doesn't have permissions to do this action":"Użytownik {uname} nie ma uprawnień do wykonania tej akcji","Operation {opname} in function {fname}() is not allowed":"Operacja {opname} w funkcji {fname}() jest niedozwolona","The user {uname} already exists in session {sessid}":"Użytkownik {uname} jest już członkiem sesji {sessid}","An error with session {sessid} has been occured":"Wystąpił błąd z sesją {sessid}","The connection {connid} is not found":"Połączenie {connid} nie zostało znalezione","The session {sessid} is not found":"Sesja {sessid} nie została znaleziona","User {uname} is not found":"Użytkownik {uname} nie został znalezione","An unidentified error occured":"Wystapił niezidentyfikowany błąd","User {uname} has been connected":"Użytkownik {uname} został podłączony","Join request of user {uname} for this session is not found":"Zapytanie o dołączenie użytkownika {uname} nie zostało znalezione dla tej sesji","Response from server can not be correctly interpreted":"Odpowiedź z serwera nie może być poprawnie zinterpretowana","Event {ename} is not found in a containerof events":"Zdarzenie {ename} nie zostało znalezione w kontenerze zdarzeń","Bad status code received from server: {scode} ({stext})":"Zły kod statusu otrzymany z serwera: {scode} ({stext})","Event {ename} is not found in a container of events":"Zdarzenie {ename} nie zostało znalezione w żadnym kontenerze","Network request failed":"Błąd połączenia z siecią"}},function(e,t,n){var r={"./en_EN.json":39,"./pl_PL.json":40};function s(e){var t=i(e);return n(t)}function i(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}s.keys=function(){return Object.keys(r)},s.resolve=i,e.exports=s,s.id=38},function(e){e.exports={}},function(e){e.exports={"Event {ename} is not found in an event's container":"Zdarzenie {ename} nie zostało znalezione w kontenerze zdarzeń","Detached hander is not found":"Odpinana funkcja obsługi zdarzenia nie została znaleziona"}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){var r=n(43),s=n(44),i=s;i.v1=r,i.v4=s,e.exports=i},function(e,t,n){var r,s,i=n(14),o=n(15),a=0,c=0;e.exports=function(e,t,n){var u=t&&n||0,l=t||[],d=(e=e||{}).node||r,f=void 0!==e.clockseq?e.clockseq:s;if(null==d||null==f){var h=i();null==d&&(d=r=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==f&&(f=s=16383&(h[6]<<8|h[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),m=void 0!==e.nsecs?e.nsecs:c+1,_=p-a+(m-c)/1e4;if(_<0&&void 0===e.clockseq&&(f=f+1&16383),(_<0||p>a)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=p,c=m,s=f;var v=(1e4*(268435455&(p+=122192928e5))+m)%4294967296;l[u++]=v>>>24&255,l[u++]=v>>>16&255,l[u++]=v>>>8&255,l[u++]=255&v;var g=p/4294967296*1e4&268435455;l[u++]=g>>>8&255,l[u++]=255&g,l[u++]=g>>>24&15|16,l[u++]=g>>>16&255,l[u++]=f>>>8|128,l[u++]=255&f;for(var y=0;y<6;++y)l[u+y]=d[y];return t||o(l)}},function(e,t,n){var r=n(14),s=n(15);e.exports=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||r)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var a=0;a<16;++a)t[i+a]=o[a];return t||s(o)}},function(e,t,n){var r=function(e){return String(Number(e))===e?Number(e):e},s=function(e,t,n){var s=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:s&&!t[e.name]&&(t[e.name]={});var i=e.push?{}:s?t[e.name]:t;!function(e,t,n,s){if(s&&!n)t[s]=r(e[1]);else for(var i=0;i<n.length;i+=1)null!=e[i+1]&&(t[n[i]]=r(e[i+1]))}(n.match(e.reg),i,e.names,e.name),e.push&&t[e.push].push(i)},i=n(16),o=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},n=[],r=t;return e.split(/(\r\n|\r|\n)/).filter(o).forEach(function(e){var t=e[0],o=e.slice(2);"m"===t&&(n.push({rtp:[],fmtp:[]}),r=n[n.length-1]);for(var a=0;a<(i[t]||[]).length;a+=1){var c=i[t][a];if(c.reg.test(o))return s(c,r,o)}}),t.media=n,t};var a=function(e,t){var n=t.split(/=(.+)/,2);return 2===n.length?e[n[0]]=r(n[1]):1===n.length&&t.length>1&&(e[n[0]]=void 0),e};t.parseParams=function(e){return e.split(/\;\s?/).reduce(a,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(e){return e.split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],n=e.split(" ").map(r),s=0;s<n.length;s+=3)t.push({component:n[s],ip:n[s+1],port:n[s+2]});return t},t.parseImageAttributes=function(e){return e.split(" ").map(function(e){return e.substring(1,e.length-1).split(",").reduce(a,{})})},t.parseSimulcastStreamList=function(e){return e.split(";").map(function(e){return e.split(",").map(function(e){var t,n=!1;return"~"!==e[0]?t=r(e):(t=r(e.substring(1,e.length)),n=!0),{scid:t,paused:n}})})}},function(e,t,n){var r=n(16),s=/%[sdv%]/g,i=function(e,t,n){var r=[e+"="+(t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format)];if(t.names)for(var i=0;i<t.names.length;i+=1){var o=t.names[i];t.name?r.push(n[t.name][o]):r.push(n[t.names[i]])}else r.push(n[t.name]);return function(e){var t=1,n=arguments,r=n.length;return e.replace(s,function(e){if(t>=r)return e;var s=n[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(s);case"%d":return Number(s);case"%v":return""}})}.apply(null,r)},o=["v","o","s","i","u","e","p","c","b","t","r","z","a"],a=["i","c","b","a"];e.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach(function(e){null==e.payloads&&(e.payloads="")});var n=t.outerOrder||o,s=t.innerOrder||a,c=[];return n.forEach(function(t){r[t].forEach(function(n){n.name in e&&null!=e[n.name]?c.push(i(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach(function(e){c.push(i(t,n,e))})})}),e.media.forEach(function(e){c.push(i("m",r.m[0],e)),s.forEach(function(t){r[t].forEach(function(n){n.name in e&&null!=e[n.name]?c.push(i(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach(function(e){c.push(i(t,n,e))})})})}),c.join("\r\n")+"\r\n"}},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,n){"use strict";n.r(t);var r=n(17),s=n.n(r);class i{static setData(e){i.data=e}static replaceFull(e,t={}){let n;return e in i.data?n=i.data[e]:(n=e,console.warn("Translation not found ("+e+")!")),i.replaceExpressions(n,t)}static replaceExpressions(e,t={}){let n=e;return Object.entries(t).forEach(([e,t])=>{n=n.replace("{"+e+"}",t)}),n}}i.data={};var o=i;const a={_instance:null,get instance(){return this._instance||(this._instance={_locales:{},_currentLocale:null,setLocale(e){void 0!==this._locales[e]?(o.setData(this._locales[e]),this._currentLocale=e):console.error("Locale "+e+"doesn't exist!")},getLocale(){return this._currentLocale},_:(e,t)=>o.replaceFull(e,t)}),this._instance}};let c=n(35);c.keys().forEach(e=>{let t=e.replace(/\.\/([a-zA-Z\_]{5})\.json/g,"$1");a.instance._locales[t]=c(e)});let u=n(38);u.keys().forEach(e=>{let t=e.replace(/\.\/([a-zA-Z\_]{5})\.json/g,"$1");a.instance._locales[t]=Object.assign({},a.instance._locales[t],u(e))}),a.instance.setLocale("pl_PL");var l=a;var d=class extends Error{constructor(e,t){super(l.instance._("JSON format of variable {vname} in function {fname}() is wrong",{vname:e,fname:t})),this.name="BadJsonFormat"}},f=n(0),h=n.n(f);var p=class extends Error{constructor(e,t,n){super(l.instance._("Parameter {pname} given to function {fname}() is not an expected type {ptype}",{pname:e,fname:t,ptype:n})),this.name="BadParamType"}};var m=class extends Error{constructor(e){super(l.instance._("Constraint {cname} is undefined in specification",{cname:e})),this.name="UndefinedConstraint"}};var _=class extends Error{constructor(e){super(l.instance._("Constraint {cname} has been used in wrong way",{cname:e})),this.name="BadConstraint"}};var v=class extends Error{constructor(e,t,n){super(l.instance._("Value {vname} does not meet expected value {exname} of the constraint {cname}",{vname:e,cname:t,exname:n})),this.name="ValueIsIncorrect",console.log("exception")}};const g={check:(e,t)=>{const n=h.a.keys(e),r=h.a.keys(t),s=n.length===r.length&&n.every((e,t)=>e===r[t]);for(const r of n){let n=null;if(s&&void 0!==t[r])n=t[r];else if(!s)throw new _("<constraint list>");null!==n&&g._checkSingleParam(e[r],n,r)}let i,o=!0;for(let n=0;n<e.length;++n)null!==(i=g.typeof(t[n],"array")?t[n]:g.exact(t.length,1)&&g.typeof(t,"object")?t:null)&&g.typeof(i,"object")&&(o=g._checkSingleParam())},_checkSingleParam:(e,t,n="<undefined_name>")=>{h.a.each(t,(t,r)=>{if("function"!=typeof g[r])throw new m(r);if(!1===g[r](e,t,n))throw new v(n,r,g._getExpectedName(t))})},_getExpectedName:e=>g.instanceof(e,Object)?e.constructor.name:g.typeof(e,"function")?e.constructor&&e.constructor.name?e.constructor.name:e.name:JSON.stringify(e),exact:(e,t,n="<undefined_name>")=>e===t,inside:(e,t,n="<undefined_name>")=>!g.typeof(t,"array")||h.a.findIndex(t,t=>t===e)>=0,required:(e,t=!0,n="<undefined_name>")=>t&&null!=e,typeof:(e,t,n="<undefined_name>")=>{const r=g._ensureArray(t);for(const t of r)switch(t){case"null":if(null===e)return!0;break;case"array":if(Array.isArray(e))return!0;break;default:if(typeof e===t)return!0}return!1},instanceof:(e,t,n="<undefined_name>")=>{if(t=g._ensureArray(t),!g.required(e)||!g.typeof(e,"object"))return!0;for(const n of t)if(e instanceof n)return!0;return!1},hasFn:(e,t,n="<undefined_name>")=>{t=g._ensureArray(t);for(const n of t)if(!g.required(e[n])||!g.typeof(e[n],"function"))return!1;return!0},props:(e,t,n="<undefined_name>")=>{h.a.each(t,(t,n)=>{n in e&&g._checkSingleParam(e[n],t,n)})},elements:(e,t,n="<undefined_name>")=>{if(!g.typeof(e,"array"))throw new _("children");return h.a.each(e,(e,r)=>{g._checkSingleParam(e,t,n+"["+r+"]")}),!0},_ensureArray:e=>Array.isArray(e)?e:g.required(e)?[e]:[]};var y=g;class w{constructor(){this._exposedFields=[],this._securedFields=[]}toUnsafeJSON(e=!1){let t={},n=this;return h.a.each(this._serializedMap,(r,s)=>{if(void 0!==n&&r in n)if("object"==typeof n[r]&&null!==n[r]&&("toJSON"in n[r]||"toUnsafeJSON"in n[r]))t[s]=e?n[r].toJSON():n[r].toUnsafeJSON();else if(Array.isArray(n[r])){let i=[];n[r].forEach(t=>{"object"==typeof t&&("toJSON"in t||"toUnsafeJSON"in t)?e?i.push(t.toJSON()):i.push(t.toUnsafeJSON()):i.push(t)}),t[s]=i}else t[s]=n[r]}),t._securedFields=this._securedFields,t}toJSON(){return w.hideSecureFields(this.toUnsafeJSON(!0))}toString(){return JSON.stringify(this.toJSON())}static fromJSON(e){let t=this._createEmpty();return h.a.each(t._serializedMap,function(n,r){t[n]=e[r]}),t}static fromString(e){return this.fromJSON(JSON.parse(e))}static hideSecureFields(e){const t=e;if(Array.isArray(e._securedFields))for(const n of e._securedFields)t[n]=null;return t}static _createEmpty(){return new w}get _serializedMap(){const e={};for(const t of this._exposedFields)e[t]="_"+t;return e}}var b=class extends Error{constructor(e,t){super(l.instance._("Operation {opname} in function {fname}() is not allowed",{opname:e,fname:t})),this.name="OperationNotAllowed"}};class S extends w{constructor(e,t,n,r,s=null,i=null){y.check({connectionId:i},{connectionId:{typeof:["null","string"]}}),super(),this._id=e,this._name=t,this._surname=n,this._email=r,this._avatar=s,this._connectionId=i,this._originalId=null,this._exposedFields=["id","name","email","surname","avatar","connectionId"]}get id(){return this._id}set id(e){this._id=e}get name(){return this._name}get surname(){return this._surname}get email(){return this._email}get avatar(){return this._avatar}get connectionId(){return this._connectionId}set connectionId(e){this._connectionId=e}get originalId(){return this._originalId}set originalId(e){if(null!==this._originalId)throw new b("User.originalId = "+e,"tbrtc-common/model/User.set originalId");this._originalId=e}fromJSON(e){return new this(e.id,e.name,inputJson.surname,e.email,e.avatar,e.connectionId)}static _createEmpty(){return new S(null,null,null,null)}}var x=class extends w{constructor(e=null){if(super(),null!==e){const t=this;h.a.each(e,(e,n)=>{t[n]=e})}}get _serializedMap(){let e={};return h.a.each(this,(t,n)=>{e[n]=n}),e}};const k=n(42);class O extends w{constructor(e,t=null,n=null,r=null){if(super(),y.check({type:e,sessionId:t,user:n,data:r},{type:{required:!0,typeof:"string",inside:O.types},sessionId:{typeof:["null","string"]},user:{typeof:["null","object"],instanceof:S},data:{typeof:["null","object"]}}),h.a.findIndex(O.types,t=>t===e)<0)throw new p("type","Message.constructor","Message.types");this._id=k(),this._sessionId=t,this._user=n,this._type=e,this._data=new x(r)}get id(){return this._id}get type(){return this._type}get data(){return this._data}get user(){return this._user}get sessionId(){return this._sessionId}set data(e){"object"==typeof e&&(this._data=new x(e))}static get types(){return["user.init","user.connect","session.new","session.request","session.stop","session.confirm","session.reject","session.data","chat.message","session.leave","session.close","sdp.transfer","ice.candidate","user.communication","success","error","message"]}get _serializedMap(){return{id:"_id",type:"_type",sessionId:"_sessionId",user:"_user",data:"_data"}}static fromJSON(e){let t=super.fromJSON(e);return null!==t.user&&(t._user=O.userModel.fromJSON(t.user)),null!==t.data&&(t.data=new x(t.data)),t}static _createEmpty(){return new O("message",null,null)}}O.userModel=S;const E=l.instance;class N extends w{constructor(e=null,t=null,n=[]){super(),this._id=e,this.creator=t,this._members=n,null!==t&&this.join(t)}get id(){return this._id}get members(){return this._members}hasMember(e){return"object"==typeof e&&"id"in e&&(e=e.id),h.a.findIndex(this.members,t=>t.id===e)>=0}join(e){if(!(e instanceof S))throw new p("user","Session.joinMember","model/User");return this.hasMember(e.id)?(console.warn(E._("The user (id = {uid}) is already a member of the session (id = {sid})",{uid:e.id,sid:this.id})+"!"),!1):(this._members.push(e),!0)}leave(e){const t=h.a.findIndex(this.members,t=>t.id===e);if(this.hasMember(e)){const e=this.members[t];return this._members.splice(t,1),e}return console.warn(E._("The user (id = {uid}) is not a member of the session (id = {sid})",{uid:e,sid:this.id})+"!"),null}isCreator(e){if(!(e instanceof S))throw new p("user","Session.isCreator","model/User");return null!==this.creator&&this.creator.id===e.id}get _serializedMap(){return{id:"_id",creator:"creator",members:"_members"}}static _createEmpty(){return new N(null,null)}static fromJSON(e){const t=super.fromJSON(e);t.creator=S.fromJSON(t.creator);const n=[];return t.members.forEach(function(e){n.push(S.fromJSON(e))}),t._members=n,t}}class I extends O{static fromJSON(e){let t=super.fromJSON(e);return"session.data"===t.type&&(t.data.session=N.fromJSON(t.data.session)),t}static _createEmpty(){return new I("message",null,null)}}class j extends O{constructor(e,t=null){y.check({user:t},{user:{typeof:["null","object"],instanceof:S}}),super(e,null,t)}toJSON(){return"user.connect"===this.type?this.toUnsafeJSON():super.toJSON()}static _createEmpty(){return new j("message",null)}}var P=n(5),T=n.n(P),B=n(18),A=n.n(B);class C extends w{constructor(e,t,n,r=null){super(),y.check({originalSdp:t,sender:n,originalBrowser:r},{originalSdp:{required:!0,typeof:"string"},sender:{typeof:["object","null"],instanceof:S},originalBrowser:{typeof:["string","null"]}}),this._type=e,this._data=t.replace(/\r\n/g,"\n"),this._sender=n,this._originalBrowser=null===r?A.a.name:r,this._parsed=null,this._changed=!1}get type(){return this._type}get parsed(){return null===this._parsed&&(this._parsed=T.a.parse(this._data)),this._parsed}set parsed(e){this._parsed=e,this._changed=!0}get data(){return null!==this._parsed&&!0===this._changed&&(this._data=T.a.write(this._parsed).replace(/\r\n/g,"\n"),this._changed=!1),this._data}get sender(){return this._sender}set bandwidth(e){h.a.each(this.parsed.media,(t,n)=>{"video"===t.type&&(void 0===t.bandwidth&&(this._parsed.media[n].bandwidth=[{}]),"firefox"===this._originalBrowser?(this._parsed.media[n].bandwidth[0].type="TIAS",this._parsed.media[n].bandwidth[0].limit=1e3*(e>>>0)):(this._parsed.media[n].bandwidth[0].type="AS",this._parsed.media[n].bandwidth[0].limit=e))}),this._changed=!0}get description(){return new RTCSessionDescription({type:this._type,sdp:this._data})}static get types(){return{OFFER:"offer",ANSWER:"answer",PRANSWER:"pranswer",ROLLBACK:"rollback"}}get _serializedMap(){return{type:"_type",sender:"_sender",data:"_data",originalBrowser:"_originalBrowser"}}static fromDescription(e,t){return new C(e.type,e.sdp,t)}static _createEmpty(){return new C("","",null)}static fromJSON(e){const t=super.fromJSON(e);return t._sender=S.fromJSON(t.sender),t}}class M extends O{constructor(e,t,n){y.check({sdp:n},{sdp:{typeof:["object","null"],instanceof:C}}),super("sdp.transfer",e,t,{sdp:n})}get sdp(){return this.data.sdp}static fromJSON(e){let t=super.fromJSON(e);return t.data.sdp=C.fromJSON(t.data.sdp),t}static _createEmpty(){return new M(null,null,null)}}class L extends w{constructor(e,t){super(),y.check({iceCandidate:e,sender:t},{iceCandidate:{typeof:["null","object"],instanceof:L._getRTCIcecandidateReference()},sender:{typeof:["null","object"],instanceof:S}}),this._iceCandidate=e,this._sender=t}get iceCandidate(){return new(L._getRTCIcecandidateReference())(this._iceCandidate)}get sender(){return this._sender}get _serializedMap(){return{iceCandidate:"_iceCandidate",sender:"_sender"}}static _getRTCIcecandidateReference(){let e;return e="undefined"!=typeof window&&"RTCIceCandidate"in window?RTCIceCandidate:Object}static _createEmpty(){return new L(null,null)}}class U extends O{constructor(e,t,n){y.check({user:t,iceModel:n},{user:{typeof:["null","object"],instanceof:S},iceModel:{typeof:["null","object"],instanceof:L}}),super("ice.candidate",e,t,{ice:n}),this.data.ice=n}get ice(){return this.data.ice}static fromJSON(e){let t=super.fromJSON(e);return t.data.ice=L.fromJSON(t.data.ice),t}static _createEmpty(){return new U(null,null,null)}}class R extends O{constructor(e,t,n,r){y.check({sessionId:e,content:n,date:r},{sessionId:{typeof:"string",required:!0},content:{typeof:"string",required:!0},date:{typeof:"string",required:!0}}),super("chat.message",e,t,{content:n,date:r})}get content(){return this.data.content}get date(){return this.data.date}static _createEmpty(){return new R("",null,"","")}}class z extends O{constructor(e,t=null,n=null){y.check({content:e,details:n},{content:{required:!0,typeof:"string"},details:{typeof:["object","null"]}}),super("success",t,null,{content:e,details:n})}get content(){return l.instance._(this.data.content,this.data.details)}get details(){return this.data.details}static _createEmpty(){return new z("")}}class F extends O{constructor(e,t=null,n={}){y.check({code:e,content:t,details:n},{code:{required:!0,typeof:"number"},content:{typeof:["string","null"]},details:{typeof:"object"}});const r=void 0!==n.sessionId?n.sessionId:null;null===t&&(t=F.matchContent(e)),super("error",r,null,{code:e,content:t,details:n})}get code(){return this.data.code}get content(){return l.instance._(this.data.content,this.data.details)}get details(){return this.data.details}static _createEmpty(){return new F(0,"")}static matchContent(e){return e===F.codes.BAD_AUTH?"The given authentication data are incorrect for user {uname}":e===F.codes.PERM_REQ?"User {uname} doesn't have permissions to do this action: {aname}":e===F.codes.DOUBLE_SESS_MEMB?"The user {uname} already exists in session {sessid}":e===F.codes.SESS_ERROR?"An error with session {sessid} has been occured":e===F.codes.CONN_NOT_FOUND?"The connection {connid} is not found":e===F.codes.SESS_NOT_FOUND?"The session {sessid} is not found":e===F.codes.USER_NOT_FOUND?"User {uname} is not found":e===F.codes.REQ_NOT_FOUND?"Join request of user {uname} for this session is not found":"An unidentified error occured"}static get codes(){return{BAD_AUTH:1,PERM_REQ:2,DOUBLE_SESS_MEMB:3,SESS_ERROR:4,CONN_NOT_FOUND:5,SESS_NOT_FOUND:6,USER_NOT_FOUND:7,REQ_NOT_FOUND:8}}}class D extends O{constructor(e,t,n){y.check({user:e,sender:t},{user:{typeof:["null","object"],instanceof:S},sender:{typeof:["null","object"],instanceof:S}}),super("user.communication",null,e,{sender:t,details:n})}get sender(){return this.data.sender}get details(){return this.data.details}static _createEmpty(){return new D(null,null,{})}}var J=class{static createFromJson(e){if("string"!=typeof e)throw new d("json","factory/MessageFactory.createFromJson");switch((e=JSON.parse(e)).type){case"session.new":case"session.close":case"session.request":case"session.stop":case"session.confirm":case"session.reject":case"session.data":case"session.leave":return I.fromJSON(e);case"answer":case"offer":return M.fromJSON(e);case"user.init":case"user.connect":return j.fromJSON(e);case"user.communication":return D.fromJSON(e);case"sdp.transfer":return M.fromJSON(e);case"ice.candidate":return U.fromJSON(e);case"chat.message":return R.fromJSON(e);case"success":return z.fromJSON(e);case"error":return F.fromJSON(e);default:return O.fromJSON(e)}}};var q=class{constructor(e,t,n=null){this.registry=t,this.id=n,this.events={},this.latestType=null,this.ws=new s.a(e,{perMessageDeflate:!1}),this.ws.on("open",()=>{console.log(`---- CONNECTED: ${this.constructor.name}${null!==this.id?this.id:""} ----`)}),this.ws.on("message",e=>{console.log(`${this.constructor.name}${null!==this.id?this.id:""} INCOMING:`),console.log(e),console.log("");const t=J.createFromJson(e);this.doActions(t),this.latestType=t.type})}doActions(e){}doLater(e,t=1e3){setTimeout(e,t)}on(e,t){this.events[e]=t}dispatch(e){void 0!==this.events[e]&&this.events[e]()}send(e){const t=JSON.stringify(e);this.ws.send(t),console.log(`${this.constructor.name}${null!==this.id?this.id:""} OUTGOING:`),console.log(t),console.log("")}},$={id:"8f861804-f8c5-47cd-8911-253b9c002e95",type:"user.connect",sessionId:null,user:{id:null,name:"John Black",email:"john@example.com",sdp:{data:"v=0\r\no=jdoe 2890844526 2890842807 IN IP4 10.47.16.5\r\ns=SDP Seminar\r\ni=A Seminar on the session description protocol\r\nu=http://www.example.com/seminars/sdp.pdf\r\ne=j.doe@example.com (Jane Doe)\r\nc=IN IP4 224.2.17.12/127\r\nt=2873397496 2873404696\r\na=recvonly\r\nm=audio 49170 RTP/AVP 0\r\nm=video 51372 RTP/AVP 99\r\na=rtpmap:99 h263-1998/90000",originalBrowser:"firefox"},connectionId:null},data:null},W={id:"8f861804-f8c5-47cd-8911-253b9c002e95",type:"session.new",sessionId:null,user:{id:null,name:"John Black",email:"john@example.com",sdp:{data:"v=0\r\no=jdoe 2890844526 2890842807 IN IP4 10.47.16.5\r\ns=SDP Seminar\r\ni=A Seminar on the session description protocol\r\nu=http://www.example.com/seminars/sdp.pdf\r\ne=j.doe@example.com (Jane Doe)\r\nc=IN IP4 224.2.17.12/127\r\nt=2873397496 2873404696\r\na=recvonly\r\nm=audio 49170 RTP/AVP 0\r\nm=video 51372 RTP/AVP 99\r\na=rtpmap:99 h263-1998/90000",originalBrowser:"firefox"},connectionId:null},data:null},V={id:"8f861804-f8c5-47cd-8911-253b9c002e95",type:"session.confirm",sessionId:null,user:{id:null,name:"John Black",email:"john@example.com",sdp:{data:"v=0\r\no=jdoe 2890844526 2890842807 IN IP4 10.47.16.5\r\ns=SDP Seminar\r\ni=A Seminar on the session description protocol\r\nu=http://www.example.com/seminars/sdp.pdf\r\ne=j.doe@example.com (Jane Doe)\r\nc=IN IP4 224.2.17.12/127\r\nt=2873397496 2873404696\r\na=recvonly\r\nm=audio 49170 RTP/AVP 0\r\nm=video 51372 RTP/AVP 99\r\na=rtpmap:99 h263-1998/90000",originalBrowser:"firefox"},connectionId:null},data:null},G={id:"8f861804-f8c5-47cd-8911-253b9c002e95",type:"session.reject",sessionId:null,user:{id:null,name:"John Black",email:"john@example.com",sdp:{data:"v=0\r\no=jdoe 2890844526 2890842807 IN IP4 10.47.16.5\r\ns=SDP Seminar\r\ni=A Seminar on the session description protocol\r\nu=http://www.example.com/seminars/sdp.pdf\r\ne=j.doe@example.com (Jane Doe)\r\nc=IN IP4 224.2.17.12/127\r\nt=2873397496 2873404696\r\na=recvonly\r\nm=audio 49170 RTP/AVP 0\r\nm=video 51372 RTP/AVP 99\r\na=rtpmap:99 h263-1998/90000",originalBrowser:"firefox"},connectionId:null},data:null},Y={id:"8f861804-f8c5-47cd-8911-253b9c002e95",type:"session.leave",sessionId:null,user:{id:null,name:"John Black",email:"john@example.com",sdp:{data:"v=0\r\no=jdoe 2890844526 2890842807 IN IP4 10.47.16.5\r\ns=SDP Seminar\r\ni=A Seminar on the session description protocol\r\nu=http://www.example.com/seminars/sdp.pdf\r\ne=j.doe@example.com (Jane Doe)\r\nc=IN IP4 224.2.17.12/127\r\nt=2873397496 2873404696\r\na=recvonly\r\nm=audio 49170 RTP/AVP 0\r\nm=video 51372 RTP/AVP 99\r\na=rtpmap:99 h263-1998/90000",originalBrowser:"firefox"},connectionId:null},data:null},Z={id:"8f861804-f8c5-47cd-8911-253b9c002e95",type:"session.request",sessionId:null,user:{id:null,name:"Edgar Dunckle",email:"edgar@example.com",sdp:{data:"v=0\r\no=jdoe 2890844526 2890842807 IN IP4 10.47.16.5\r\ns=SDP Seminar\r\ni=A Seminar on the session description protocol\r\nu=http://www.example.com/seminars/sdp.pdf\r\ne=j.doe@example.com (Jane Doe)\r\nc=IN IP4 224.2.17.12/127\r\nt=2873397496 2873404696\r\na=recvonly\r\nm=audio 49170 RTP/AVP 0\r\nm=video 51372 RTP/AVP 99\r\na=rtpmap:99 h263-1998/90000",originalBrowser:"firefox"},connectionId:null},data:null};var H=class extends q{constructor(e,t,n=null){super(e,t,n),this.rejectFlag=!1}doActions(e){switch(e.type){case"user.init":return this.user=e.user,this.doLater(()=>{this.send(this.connectUserMessage())});case"success":if("user.init"===this.latestType)return this.user=e.details.user,this.doLater(()=>{this.send(this.createSessionMsg())});break;case"session.new":this.sessionId=e.sessionId,this.registry.sessionId=this.sessionId,this.dispatch("session.new");break;case"session.request":return this.userRequested=e.user,this.doLater(()=>{!0===this.rejectFlag?this.send(this.rejectSessionMsg()):this.send(this.confirmSessionMsg())})}return null}rejected(e){this.rejectFlag=e}connectUserMessage(){return{...$,user:{...$.user,name:Z.user.name+this.id,connectionId:this.user.connectionId}}}createSessionMsg(){return{...W,user:{...W.user,name:Z.user.name+this.id,id:this.user.id,connectionId:this.user.connectionId}}}confirmSessionMsg(){return{...V,sessionId:this.sessionId,user:{id:this.userRequested.id,name:this.userRequested.name,email:this.userRequested.email,sdp:this.userRequested.sdp,connectionId:this.user.connectionId}}}rejectSessionMsg(){return{...G,sessionId:this.sessionId,user:{id:this.userRequested.id,name:this.userRequested.name,email:this.userRequested.email,sdp:this.userRequested.sdp,connectionId:this.user.connectionId}}}leaveSessionMsg(){return{...Y,sessionId:this.registry.sessionId,name:Z.user.name+this.id,user:{...Y.user,id:this.user.id,connectionId:this.user.connectionId}}}};var K=class extends q{doActions(e){switch(e.type){case"user.init":return this.user=e.user,this.doLater(()=>{this.send(this.connectUserMessage())});case"success":if("user.init"===this.latestType)return this.user=e.details.user,this.doLater(()=>{this.send(this.requestSessionMsg())});break;case"session.data":this.dispatch("session.data")}return null}requestSessionMsg(){return{...Z,sessionId:this.registry.sessionId,user:{...Z.user,name:Z.user.name+this.id,id:this.user.id,connectionId:this.user.connectionId}}}leaveSessionMsg(){return{...Y,sessionId:this.registry.sessionId,user:{...Y.user,name:Z.user.name+this.id,id:this.user.id,connectionId:this.user.connectionId}}}connectUserMessage(){return{...$,user:{...$.user,name:Z.user.name+this.id,connectionId:this.user.connectionId}}}};const X={},Q="ws://localhost:9876";let ee,te,ne=0;switch(process.argv.forEach(function(e,t,n){"--case"===e&&(ne=parseInt(n[t+1]))}),console.log("selected case: "+ne),ne){case 1:{const e=new H(Q,X,0);e.on("session.new",()=>{(ee=new K(Q,X,1)).on("session.data",()=>{(te=new K(Q,X,2)).on("session.data",()=>{ee.doLater(()=>{ee.send(ee.leaveSessionMsg()),e.doLater(()=>{e.send(e.leaveSessionMsg())},5e3)})})})})}break;case 2:new H(Q,X,0).on("session.new",()=>{(ee=new K(Q,X,1)).on("session.data",()=>{ee.ws.close()})});break;case 3:{const e=new H(Q,X,0);e.rejected(!0),e.on("session.new",()=>{ee=new K(Q,X,1)})}}}]);